# Telegram Wake-on-LAN Bot
This project creates a Telegram bot that allows you to register MAC addresses and send Wake-on-LAN (WoL) packets to wake devices on your local network. Each Telegram user has their own private registry of devices.

## Table of Contents
1. Requirements
2. Setup
    1. Obtain a Telegram Bot API Key
    2. Clone the Repository
    3. Option A: Run with Docker (Recommended)
    4. Option B: Run with Python
3. Usage
4. Available Commands

## Requirements
- **For Docker setup (Recommended):**
  - Docker and Docker Compose installed
  - Telegram account
  - A device on your local network to send Wake-on-LAN packets to

- **For Python setup:**
  - Python 3.7 or higher
  - Telegram account
  - A device on your local network to send Wake-on-LAN packets to

## Setup

### 1. Obtain a Telegram Bot API Key

To create a new bot, follow these steps:

1. Open Telegram and search for BotFather.
2. Start a chat with BotFather and send the command /newbot.
3. Follow the prompts to set up your new bot:
    - Give it a name.
    - Choose a unique username (must end with "bot", e.g., MyWakeBot).
4. Once created, you will receive an API Key. Save this key as it will be used to run your bot.

### 2. Clone the Repository
```bash
git clone https://github.com/NikoConn/Telegram-Wake-on-LAN-Bot.git
cd Telegram-Wake-on-LAN-Bot
```

### 3. Option A: Run with Docker (Recommended)

Docker makes it easy to deploy the bot without worrying about Python dependencies.

#### Steps:

1. **Create a `.env` file** in the project directory:
   ```bash
   cp .env.example .env
   ```

2. **Edit the `.env` file** and add your Telegram bot API key:
   ```bash
   TELEGRAM_API_KEY=your_telegram_bot_api_key_here
   ```

3. **Start the bot** using Docker Compose:
   ```bash
   docker compose up -d
   ```

4. **Check the logs** to ensure the bot is running:
   ```bash
   docker compose logs -f
   ```

5. **Stop the bot** when needed:
   ```bash
   docker compose down
   ```

Your bot is now running in a Docker container! The MAC registry data will be persisted in the `./data` directory.

### 4. Option B: Run with Python

If you prefer to run the bot directly with Python:

#### 3.1. Install Dependencies
You can install the required dependencies using pip:

```bash
pip install -r requirements.txt
```

#### 3.2. Set Up the API Key
1. Create a file named API_KEY in the project directory.
2. Add your Telegram bot API key to the API_KEY file:
```bash
echo "YOUR_API_KEY_HERE" > API_KEY
```

#### 3.3. Run the Bot
Start the bot by running:

```bash
python main.py
```
Your bot is now running! You can interact with it using the Telegram app.

## Usage
Once your bot is running, you can send the following commands to it in a chat:

### Available Commands
- /start - Shows a welcome message and general instructions.
- /addmac <name> <mac_address> - Registers a MAC address with a given name. Example:
    ```mathematica
    /addmac Laptop 00:1A:2B:3C:4D:5E
    ```
- /listmacs - Lists all registered devices for your user account.
- /removemac <name> - Removes a registered device with the specified name. Example:
    ```bash
    /removemac Laptop
    ```
- /wol <name> - Sends a Wake-on-LAN packet to the registered device with the specified name. Example:
    ```bash
    /wol Laptop
    ```

## Project Structure
```bash
telegram-wol-bot/
│
├── main.py              # Main bot code
├── persistence.py       # Functions for data persistence
├── requirements.txt     # Python dependencies
├── Dockerfile           # Docker image definition
├── docker-compose.yml   # Docker Compose configuration
├── .dockerignore        # Files to exclude from Docker build
├── .env.example         # Environment variable template
├── mac_registry.json    # Data file (created after running)
├── data/                # Docker volume for persistent data
├── API_KEY              # File containing the Telegram bot API key (for Python setup)
└── README.md            # Project documentation (this file)
```
## Notes
- Ensure that the device you want to wake up supports Wake-on-LAN and is properly configured.
- The bot maintains a separate MAC address registry for each Telegram user, ensuring privacy and personalized configurations.
- When using Docker, the bot runs in `host` network mode to ensure Wake-on-LAN packets can reach devices on your local network.
- The MAC registry data is persisted in the `./data` directory when using Docker, or in `mac_registry.json` when running with Python directly.
